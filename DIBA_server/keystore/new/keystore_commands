# Generate keystore
keytool -genkey -keystore keystore.jks -alias diba -keyalg RSA -sigalg SHA256withRSA -validity 365 -keysize 204

# Generate a keystore and self-signed certificate:
keytool -genkey -keyalg RSA -alias diba -keystore keystore.jks -storepass password -keysize 2048

# Convert keystore to pkcs12
keytool -importkeystore -srckeystore keystore.jks -destkeystore keystore.jks -deststoretype pkcs12

# List keystore certificates
keytool -list -v -keystore keystore.jks

# Generate CSR for CA
keytool -certreq -alias diba -keystore keystore.jks -file DIBA.csr

# Import a root or intermediate CA certificate to an existing Java keystore:
keytool -import -trustcacerts -alias diba -file domainname.crt -keystore keystore.jks

# Delete a certificate from a Java keytool keystore:
keytool -delete -alias diba -keystore keystore.jks

# Export a certificate from a keystore:
keytool -export -alias diba -keystore keystore.jks -file filename.crt 
keytool -export -alias diba -keystore keystore.jks -rfc -file X509_certificate.cer

# Change keystore password
keytool -storepasswd -new new_storepass -keystore keystore.jks

# Check a CSR/CERT
openssl req -text -noout -verify -in CSR.csr
openssl x509 -in DIBA.p12 -text -noout
openssl pkcs12 -info -in keyStore.p12

# Convert a PEM file to DER
openssl x509 -outform der -in certificate.pem -out certificate.der

# Convert a PEM certificate file and a private key to PKCS#12 (.pfx .p12)
openssl pkcs12 -export -out certificate.p12 -inkey privateKey.key -in DIBA.pem -certfile CACert.crt

keytool -exportcert -rfc -alias diba -file DIBA.pem -keystore DIBA.p12 -storepass password -storetype PKCS12 -v

# Certificate Authority
# Generate root CA private key
openssl genrsa -des3 -out myCA.key 2048

# Generate root CA certificate 
openssl req -x509 -new -nodes -key rootCA.key -sha256 -days 1825 -out rootCA.pem

# Generate server private key
openssl genrsa -out DIBA.key 2048

# Generate server CSR
openssl req -new -key DIBA.key -out DIBA.csr

# Generate certificate from CSR
openssl x509 -req -in DIBA.csr -CA rootCA.pem -CAkey rootCA.key -CAcreateserial -out DIBA.crt -days 825 -sha256 -extfile DIBA.ext

# Generate pkcs12 from CA key and certificate
openssl pkcs12 -export -in rootCA.pem -inkey rootCA.key -out rootCA.p12

# Create keystore from CA p12 
keytool -importkeystore -srckeystore rootCA.p12 -srcstoretype pkcs12 -destkeystore keystore.jks -deststoretype JKS

# Change alias name
keytool -changealias -keystore keystore.jks -alias 1

# Convert the x.509 cert and key to a pkcs12 file
openssl pkcs12 -export -in DIBA.crt -inkey DIBA.key -out DIBA.p12 -name diba -CAfile rootCA.pem 

# Convert the pkcs12 file to a keystore
keytool -importkeystore -deststorepass password -destkeypass rootCA.key -destkeystore keystore.jks -srckeystore DIBA.p12 -srcstoretype PKCS12 -srcstorepass password -alias diba

# Verify private key password
keytool -keypasswd -new password -keystore keystore.jks -storepass password -alias diba -keypass password

